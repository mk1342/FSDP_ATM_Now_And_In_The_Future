<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OCBC Voice Assistant</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#f5f7fa; display:flex; justify-content:center; padding-top:50px; }
  .assistant-wrapper { width: 400px; border-radius:12px; overflow:hidden; box-shadow: 0 6px 25px rgba(0,0,0,0.18); background:white; }
  .chat-header { display:flex; align-items:center; gap:10px; padding:10px 15px; background:#ED2772; color:white; }
  .chat-header img { height:40px; }
  .chat-header h2 { margin:0; font-size:18px; }
  #chat { max-height:500px; overflow-y:auto; padding:10px; }
  .msg { padding:10px 15px; margin:6px 0; border-radius:20px; max-width:75%; word-wrap:break-word; opacity:0; transform:translateY(10px); animation:fadeIn 0.3s forwards; }
  .user { background:#f5f7fa; color:#000; margin-left:auto; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
  .bot { background:#ED2772; color:white; margin-right:auto; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
  .input-row { display:flex; gap:10px; padding:10px; }
  input { flex:1; padding:10px 12px; border-radius:25px; border:1px solid #ccc; font-size:16px; }
  button { padding:10px 15px; border:none; border-radius:25px; cursor:pointer; background:#ED2772; color:white; }
  button:hover { transform:scale(1.05); }
  .typing { display:flex; gap:4px; margin:6px 0; }
  .dot { width:8px; height:8px; background:#ED2772; border-radius:50%; animation:blink 1.4s infinite both; }
  .dot:nth-child(2){ animation-delay:0.2s; }
  .dot:nth-child(3){ animation-delay:0.4s; }
  @keyframes fadeIn { to { opacity:1; transform:translateY(0); } }
  @keyframes blink { 0%,80%,100%{opacity:0;} 40%{opacity:1;} }
</style>
</head>
<body>
<div class="assistant-wrapper">
  <div class="chat-header">
    <img src="ocbc_logo.png" alt="OCBC Logo">
    <h2>OCBC Voice Assistant</h2>
  </div>
  <div id="chat"></div>
  <div class="typing" id="typing" style="display:none;">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <div class="input-row">
    <input type="text" id="userMsg" placeholder="Type a message...">
    <button id="sendBtn">Send</button>
    <button id="voiceBtn">ðŸŽ¤</button>
  </div>
</div>

<script>
const chatDiv = document.getElementById('chat');
const typingDiv = document.getElementById('typing');
const input = document.getElementById('userMsg');

function addMsg(text, type) {
  const div = document.createElement('div');
  div.className = `msg ${type}`;
  div.textContent = text;
  chatDiv.appendChild(div);
  chatDiv.scrollTop = chatDiv.scrollHeight;
}

function botReply(msg) {
  typingDiv.style.display = 'flex';
  setTimeout(() => {
    typingDiv.style.display = 'none';
    let reply = "Hello! I am your OCBC Voice Assistant.";
    const t = msg.toLowerCase();
    if(t.includes('balance')) reply = "Your balance is $1,234.56.";
    else if(t.includes('loan')) reply = "We offer personal and home loans with competitive rates. Visit OCBC.com for details.";
    else if(t.includes('hello') || t.includes('hi')) reply = "Hello! How can I assist you today?";
    else if(t.includes('thank')) reply = "You're welcome! Always happy to help.";
    else if(t.includes('sad') || t.includes('angry')) reply = "I'm here for you. Take a deep breath, everything will be okay.";
    addMsg(reply, 'bot');
    speak(reply);
  }, 500);
}

function sendMessage() {
  const msg = input.value.trim();
  if(!msg) return;
  addMsg(msg, 'user');
  input.value = '';
  botReply(msg);
}

document.getElementById('sendBtn').addEventListener('click', sendMessage);
input.addEventListener('keyup', e => { if(e.key==='Enter') sendMessage(); });

function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  speechSynthesis.speak(u);
}

document.getElementById('voiceBtn').addEventListener('click', () => {
  const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  rec.lang = 'en-SG';
  rec.onresult = e => {
    input.value = e.results[0][0].transcript;
    sendMessage();
  }
  rec.start();
});
</script>
</body>
</html>
